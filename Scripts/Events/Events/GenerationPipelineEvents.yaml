# Generation pipeline event definitions (Stellaris-style on_actions)
# Factories fire triggers like "on_generation_populate_galaxy"; these triggered-only events
# exist primarily as modding hook points. By default they do nothing.
Events:
  # Galaxy scope hooks
  - UniqueId: "generation.on_generation_galaxy_lites_built"
    Name: "Generation - Galaxy Lites Built"
    Title: "Generation Hook"
    Description: "Hook: galaxy system-lites and adjacency have been built."
    Type: "generation_event"
    Scope: "galaxy"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_galaxy_lites_built"

  - UniqueId: "generation.on_generation_populate_galaxy"
    Name: "Generation - Populate Galaxy"
    Title: "Generation Hook"
    Description: "Hook: decide empires/system plan/special systems. Write results via generation_* effects."
    Type: "generation_event"
    Scope: "galaxy"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_populate_galaxy"

  - UniqueId: "generation.on_generation_complete"
    Name: "Generation - Complete"
    Title: "Generation Hook"
    Description: "Hook: generation finished (before on_game_started)."
    Type: "generation_event"
    Scope: "galaxy"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_complete"

  # Node population hooks (these are fired by NodeFactoryBase during lazy generation)
  - UniqueId: "generation.on_generation_populate_children_lazy.system"
    Name: "Generation - Populate System Children (Lazy)"
    Title: "Generation Hook"
    Description: "Hook: before lazy system children are collected (celestials)."
    Type: "generation_event"
    Scope: "star_system"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_populate_children_lazy"

  - UniqueId: "generation.on_generation_populate_children_lazy.celestial"
    Name: "Generation - Populate Celestial Children (Lazy)"
    Title: "Generation Hook"
    Description: "Hook: before lazy celestial children are collected (regions)."
    Type: "generation_event"
    Scope: "celestial_body"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_populate_children_lazy"

  - UniqueId: "generation.on_generation_populate_children_lazy.region"
    Name: "Generation - Populate Region Children (Lazy)"
    Title: "Generation Hook"
    Description: "Hook: before lazy region children are collected (hexes)."
    Type: "generation_event"
    Scope: "region"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_populate_children_lazy"

  # Empire completion hooks
  - UniqueId: "generation.on_generation_empire_finished_to_era_depth"
    Name: "Generation - Empire Finished To Era Depth"
    Title: "Generation Hook"
    Description: "Hook: empire's home area has been generated down to its era depth."
    Type: "generation_event"
    Scope: "empire"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_empire_finished_to_era_depth"

  - UniqueId: "generation.generate_starting_assets"
    Name: "Generation - Generate Starting Assets"
    Title: "Generation Hook"
    Description: "Hook: spawn starting structures/units appropriate for the empire era."
    Type: "generation_event"
    Scope: "empire"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "generate_starting_assets"

  # Generic node post-generation hooks
  - UniqueId: "generation.on_generation_node_generated.system"
    Name: "Generation - Node Generated (System)"
    Title: "Generation Hook"
    Description: "Hook: a star system node finished generation."
    Type: "generation_event"
    Scope: "star_system"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_node_generated"

  - UniqueId: "generation.on_generation_node_generated.celestial"
    Name: "Generation - Node Generated (Celestial)"
    Title: "Generation Hook"
    Description: "Hook: a celestial body node finished generation."
    Type: "generation_event"
    Scope: "celestial_body"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_node_generated"

  - UniqueId: "generation.on_generation_node_generated.region"
    Name: "Generation - Node Generated (Region)"
    Title: "Generation Hook"
    Description: "Hook: a region node finished generation."
    Type: "generation_event"
    Scope: "region"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_node_generated"

  - UniqueId: "generation.spawn_city_site_on_region_generated"
    Name: "Generation - Spawn City Site On Region Generated"
    Title: "Generation Hook"
    Description: "Places one city-site anchor on a random non-ocean hex in each region that does not already contain one."
    Type: "generation_event"
    Scope: "region"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_node_generated"
    ImmediateEffects:
      - type: "if"
        payload:
          condition:
            NOT:
              does_node_have_child_where:
                OR:
                  - has_flag: "city_site"
                  - has_component: "HexCityComponent"
                child_scope: "hex"
          effects:
            - type: "spawn_unit_or_structure_at_node"
              payload:
                selection: "random"
                where:
                  child_scope: "hex"
                  require_non_ocean_hex: true
                set_hex_city_id: "city_site_default"
                add_flags: ["city_site", "can_colonize"]

  - UniqueId: "generation.on_generation_node_generated.hex"
    Name: "Generation - Node Generated (Hex)"
    Title: "Generation Hook"
    Description: "Hook: a hex node finished generation."
    Type: "generation_event"
    Scope: "hex"
    IsTriggeredOnly: true
    ShowModal: false
    PreTriggers:
      - "on_generation_node_generated"

